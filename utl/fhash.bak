{*******************************************************************************
*                                                                              *
* Program to determine hash keys                                               *
*                                                                              *
*******************************************************************************}

program fhash(input, output);

label 99;

type name = packed array[1..10] of char;

var s:   name;
    max: 0..65535; { hash max }

procedure inpstr(var str : name);

var i: integer;

begin

   for i := 1 to 10 do str[i] := ' ';
   i := 1;
   while (i <= 10) and not eoln(input) do begin

      read(str[i]);
      i := i + 1

   end;
   readln;
   if i > 10 then begin

      writeln('Input overflow');
      goto 99

   end

end;

function null(var str: name) : boolean;

var i : integer;
    f : boolean;

begin

   f := true;
   for i := 1 to 10 do if str[i] <> ' ' then f := false;
   null := f

end;

function hash(s: name) : integer;

var i, r : integer;

begin

   r := 0;
   for i := 1 to 10 do if s[i] <> ' ' then r := r + ord(s[i]);
   hash := r mod max + 1

end;

begin { hash }

   write('Input max (number of hash entries): ');
   readln(max);
   writeln('Input character strings terminated by null');
   write('>'); inpstr(s);
   while not null(s) do begin

      writeln(s, ':', hash(s));
      write('>'); inpstr(s)

   end;

   99:;

end.
