{*******************************************************************************
*                                                                              *
*                         OPCODE INITIALIZATION MODULE                         *
*                                                                              *
*                       Copyright (C) 2006 S. A. Moore                         *
*                            All rights reserved                               *
*                                                                              *
* PURPOSE:                                                                     *
*                                                                              *
* Defines the opcodes for this assembler module.                               *
*                                                                              *
* WARNING: *** THIS FILE IS AUTOMATICALLY GENERATED. DO NOT MODIFY ***         *
*                                                                              *
* This file is generated by hastab from the input file opcode.lab. It defines  *
* the resini procedure, that initializes the reserved word table.              *
*                                                                              *
* CREATING:                                                                    *
*                                                                              *
* To create this file, run hashtab in this directory.                          *
*                                                                              *
*******************************************************************************}

module opcini;

uses utl,    { assembly support routines }
     opcdef, { opcode definition }
     macdef; { machine specific definition }

var ressym: restab; { reserved symbols table }

{*******************************************************************************
                                                                                
Initalize reserved word table                                                   
                                                                                
The reserved word table is an array of records, with each record containing a   
label, and a entry chain. The label is the actual reserved word itself. The     
chain is an index into the reserved word table itself. Each position (index) in 
the reserved word table corresponds to a 'hash' value for a given label. The    
hash value is a random function derived for the label that gives some level     
(typ > 90%) of 'uniqueness' for a given label (see the 'hash' routine for       
details of the process). Each 'prime' label occupys the entry cooresponding to  
it's hash value (a prime entry means that it is the first label for the hash    
value to be placed). Duplicate entrys are placed in locations that have no      
prime label. The chain fields then point to these labels succesively from the   
prime entry, terminated with 0. A lookup is performed by succesively examining  
each label in a chain, starting with the prime label, until a match is found    
or the end of a chain is reached.                                               
                                                                                
This routine sets up the labels and chain fields making up the table. The table 
should already be cleared.                                                      
                                                                                
*******************************************************************************}

procedure resini;

begin

   { labels }

   copy(ressym[opdec    ].reslab, 'dec       ');
   copy(ressym[opcpi    ].reslab, 'cpi       ');
   copy(ressym[ophalt   ].reslab, 'halt      ');
   copy(ressym[opsra    ].reslab, 'sra       ');
   copy(ressym[oprrd    ].reslab, 'rrd       ');
   copy(ressym[opret    ].reslab, 'ret       ');
   copy(ressym[opdaa    ].reslab, 'daa       ');
   copy(ressym[opnop    ].reslab, 'nop       ');
   copy(ressym[opadc    ].reslab, 'adc       ');
   copy(ressym[opadd    ].reslab, 'add       ');
   copy(ressym[opinc    ].reslab, 'inc       ');
   copy(ressym[opsla    ].reslab, 'sla       ');
   copy(ressym[opccf    ].reslab, 'ccf       ');
   copy(ressym[opdi     ].reslab, 'di        ');
   copy(ressym[opei     ].reslab, 'ei        ');
   copy(ressym[opif     ].reslab, 'if        ');
   copy(ressym[opld     ].reslab, 'ld        ');
   copy(ressym[opdefb   ].reslab, 'defb      ');
   copy(ressym[opretn   ].reslab, 'retn      ');
   copy(ressym[opand    ].reslab, 'and       ');
   copy(ressym[opldd    ].reslab, 'ldd       ');
   copy(ressym[opdeff   ].reslab, 'deff      ');
   copy(ressym[opim     ].reslab, 'im        ');
   copy(ressym[opcpd    ].reslab, 'cpd       ');
   copy(ressym[opsbc    ].reslab, 'sbc       ');
   copy(ressym[opldi    ].reslab, 'ldi       ');
   copy(ressym[opneg    ].reslab, 'neg       ');
   copy(ressym[opind    ].reslab, 'ind       ');
   copy(ressym[opcall   ].reslab, 'call      ');
   copy(ressym[opex     ].reslab, 'ex        ');
   copy(ressym[oprl     ].reslab, 'rl        ');
   copy(ressym[opcpl    ].reslab, 'cpl       ');
   copy(ressym[opini    ].reslab, 'ini       ');
   copy(ressym[oprlc    ].reslab, 'rlc       ');
   copy(ressym[oprlca   ].reslab, 'rlca      ');
   copy(ressym[oprld    ].reslab, 'rld       ');
   copy(ressym[oprr     ].reslab, 'rr        ');
   copy(ressym[oprra    ].reslab, 'rra       ');
   copy(ressym[oplddr   ].reslab, 'lddr      ');
   copy(ressym[oprrc    ].reslab, 'rrc       ');
   copy(ressym[oprrca   ].reslab, 'rrca      ');
   copy(ressym[opcpdr   ].reslab, 'cpdr      ');
   copy(ressym[opsub    ].reslab, 'sub       ');
   copy(ressym[opldir   ].reslab, 'ldir      ');
   copy(ressym[opset    ].reslab, 'set       ');
   copy(ressym[opindr   ].reslab, 'indr      ');
   copy(ressym[opcpir   ].reslab, 'cpir      ');
   copy(ressym[oppop    ].reslab, 'pop       ');
   copy(ressym[opscf    ].reslab, 'scf       ');
   copy(ressym[opsrl    ].reslab, 'srl       ');
   copy(ressym[opinir   ].reslab, 'inir      ');
   copy(ressym[oprla    ].reslab, 'rla       ');
   copy(ressym[opreti   ].reslab, 'reti      ');
   copy(ressym[opexx    ].reslab, 'exx       ');
   copy(ressym[opdjnz   ].reslab, 'djnz      ');
   copy(ressym[opdefqw  ].reslab, 'defqw     ');
   copy(ressym[opout    ].reslab, 'out       ');
   copy(ressym[opotdr   ].reslab, 'otdr      ');
   copy(ressym[opbit    ].reslab, 'bit       ');
   copy(ressym[opalignp ].reslab, 'alignp    ');
   copy(ressym[opoutd   ].reslab, 'outd      ');
   copy(ressym[opres    ].reslab, 'res       ');
   copy(ressym[opotir   ].reslab, 'otir      ');
   copy(ressym[opcp     ].reslab, 'cp        ');
   copy(ressym[oppush   ].reslab, 'push      ');
   copy(ressym[opouti   ].reslab, 'outi      ');
   copy(ressym[opxor    ].reslab, 'xor       ');
   copy(ressym[opin     ].reslab, 'in        ');
   copy(ressym[opinclude].reslab, 'include   ');
   copy(ressym[oprst    ].reslab, 'rst       ');
   copy(ressym[opjp     ].reslab, 'jp        ');
   copy(ressym[opjr     ].reslab, 'jr        ');
   copy(ressym[opor     ].reslab, 'or        ');
   copy(ressym[opmacro  ].reslab, 'macro     ');
   copy(ressym[opendmac ].reslab, 'endmac    ');
   copy(ressym[opequ    ].reslab, 'equ       ');
   copy(ressym[opglobal ].reslab, 'global    ');
   copy(ressym[opalignv ].reslab, 'alignv    ');
   copy(ressym[opelse   ].reslab, 'else      ');
   copy(ressym[opelseif ].reslab, 'elseif    ');
   copy(ressym[opendif  ].reslab, 'endif     ');
   copy(ressym[opassm   ].reslab, 'assm      ');
   copy(ressym[opbendian].reslab, 'bendian   ');
   copy(ressym[oplendian].reslab, 'lendian   ');
   copy(ressym[opdefps  ].reslab, 'defps     ');
   copy(ressym[opdefvs  ].reslab, 'defvs     ');
   copy(ressym[opextern ].reslab, 'extern    ');
   copy(ressym[opdefbe  ].reslab, 'defbe     ');
   copy(ressym[opdefle  ].reslab, 'defle     ');
   copy(ressym[opdefbef ].reslab, 'defbef    ');
   copy(ressym[opdeflef ].reslab, 'deflef    ');
   copy(ressym[opdefsf  ].reslab, 'defsf     ');
   copy(ressym[opdeflf  ].reslab, 'deflf     ');
   copy(ressym[opdefw   ].reslab, 'defw      ');
   copy(ressym[opdefhw  ].reslab, 'defhw     ');
   copy(ressym[opdefdw  ].reslab, 'defdw     ');

   { chains }

   ressym[opcpi    ].reschn := opscf;
   ressym[ophalt   ].reschn := opelse;
   ressym[opsra    ].reschn := opendif;
   ressym[oprrd    ].reschn := opendmac;
   ressym[opret    ].reschn := opequ;
   ressym[opinc    ].reschn := opjp;
   ressym[opsla    ].reschn := opdefle;
   ressym[opccf    ].reschn := opdec;
   ressym[opretn   ].reschn := opxor;
   ressym[opand    ].reschn := opcp;
   ressym[opim     ].reschn := opdefbe;
   ressym[opcpd    ].reschn := opin;
   ressym[opneg    ].reschn := opinc;
   ressym[opcall   ].reschn := opcpi;
   ressym[opcpl    ].reschn := oprla;
   ressym[opini    ].reschn := opsla;
   ressym[oprlc    ].reschn := opor;
   ressym[oprlca   ].reschn := oprld;
   ressym[oplddr   ].reschn := opsra;
   ressym[oprrca   ].reschn := oprrd;
   ressym[opcpdr   ].reschn := ophalt;
   ressym[opsub    ].reschn := opres;
   ressym[opldir   ].reschn := opret;
   ressym[opindr   ].reschn := opnop;
   ressym[opcpir   ].reschn := opdefhw;
   ressym[opscf    ].reschn := opjr;
   ressym[opsrl    ].reschn := opglobal;
   ressym[opinir   ].reschn := opmacro;
   ressym[oprla    ].reschn := opbit;
   ressym[opreti   ].reschn := opassm;
   ressym[opout    ].reschn := opelseif;
   ressym[opotdr   ].reschn := opretn;
   ressym[opalignp ].reschn := oplendian;
   ressym[opres    ].reschn := opdefdw;
   ressym[opouti   ].reschn := opalignv;
   ressym[opxor    ].reschn := oprst;
   ressym[opjr     ].reschn := opdefbef;
   ressym[opor     ].reschn := opdeflf;
   ressym[opmacro  ].reschn := opdefps;
   ressym[opendmac ].reschn := opdefsf;
   ressym[opglobal ].reschn := opbendian;
   ressym[opelseif ].reschn := opdefvs;
   ressym[opendif  ].reschn := opdeflef;
   ressym[opdeflef ].reschn := opdefw;

end;

begin
end.
